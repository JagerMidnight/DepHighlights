<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DepHighlights</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0;
            margin: 0;
            position: relative;
            overflow-y: auto;
            background-color: #1f2937;
            color: #E5E7EB;
        }

        .main-content-area {
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            box-sizing: border-box;
            background-color: transparent;
        }

        .highlight-card {
            background-color: rgba(31, 41, 55, 0.95);
            border-radius: 1rem;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.3s ease;
            height: 100%;
        }

        .highlight-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 20px rgba(0, 0, 0, 0.3);
        }

        .highlight-card video {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background-color: black;
        }

        .squircle-button {
            background-color: #4B5563;
            color: #E5E7EB;
            padding: 0.75rem;
            border-radius: 0.75rem;
            font-family: 'Roboto', sans-serif;
            font-weight: 500;
            transition: background-color 0.2s ease, transform 0.1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .squircle-button:hover {
            background-color: #6B7280;
            transform: translateY(-1px);
        }

        .squircle-button:active {
            transform: translateY(0);
        }

        h1, h2 {
            font-family: 'Roboto', sans-serif;
            font-weight: 700;
        }
        p, span {
            font-family: 'Inter', sans-serif;
        }

        .tooltip-container {
            position: relative;
            display: inline-block;
        }

        .tooltip-text {
            visibility: hidden;
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 8px;
            position: absolute;
            z-index: 1001;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            white-space: nowrap;
            font-size: 0.8rem;
        }

        .tooltip-container:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body class="text-gray-900">
    <div id="main-content-area" class="main-content-area p-6">
        <div id="highlights-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 w-full max-w-screen-xl">
        </div>
    </div>

    <div id="copy-message" class="fixed bottom-4 left-1/2 -translate-x-1/2 hidden bg-green-500 text-white px-4 py-2 rounded-md shadow-md z-50">
        Link Copied!
    </div>

    <script type="module">
        import { highlights } from './highlights.js';

        const highlightsGrid = document.getElementById('highlights-grid');
        const copyMessage = document.getElementById('copy-message');

        function renderHighlightCards() {
            if (highlights.length === 0) {
                highlightsGrid.innerHTML = '<p class="text-gray-400 text-center col-span-full">No highlights to display.</p>';
                return;
            }

            highlightsGrid.innerHTML = highlights.map(highlight => `
                <div class="highlight-card">
                    <video src="${highlight.video}" muted loop preload="auto">
                        Your browser does not support the video tag.
                    </video>
                    <div class="p-4 flex justify-start mt-auto">
                        <div class="tooltip-container">
                            <button class="squircle-button p-2 copy-video-link-btn" data-tooltip="Copy Link" data-video-path="${highlight.video}">
                                <span class="material-icons text-xl">link</span>
                            </button>
                            <span class="tooltip-text"></span>
                        </div>
                    </div>
                </div>
            `).join('');

            document.querySelectorAll('.copy-video-link-btn').forEach(button => {
                button.addEventListener('click', (event) => {
                    const videoPath = button.dataset.videoPath;
                    const videoUrl = `${window.location.origin}/videos/${encodeURIComponent(videoPath.replace(/^\/+/, ''))}`;
                    copyLink(videoUrl);
                });
                setupTooltip(button);
            });
        }

        function copyLink(urlToCopy) {
            const tempInput = document.createElement('textarea');
            tempInput.value = urlToCopy;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand('copy');
            document.body.removeChild(tempInput);

            copyMessage.classList.remove('hidden');
            setTimeout(() => {
                copyMessage.classList.add('hidden');
            }, 2000);
        }

        function setupTooltip(buttonElement) {
            const tooltipContainer = buttonElement.closest('.tooltip-container');
            if (!tooltipContainer) return;

            const tooltipTextElement = tooltipContainer.querySelector('.tooltip-text');
            const tooltipContent = buttonElement.dataset.tooltip;

            if (tooltipTextElement && tooltipContent) {
                tooltipTextElement.textContent = tooltipContent;

                buttonElement.addEventListener('mouseover', () => {
                    tooltipTextElement.style.visibility = 'visible';
                    tooltipTextElement.style.opacity = '1';
                });

                buttonElement.addEventListener('mouseout', () => {
                    tooltipTextElement.style.visibility = 'hidden';
                    tooltipTextElement.style.opacity = '0';
                });
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderHighlightCards();
        });
    </script>
</body>
</html>
